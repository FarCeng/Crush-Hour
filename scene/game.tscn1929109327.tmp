[gd_scene load_steps=15 format=3 uid="uid://dtsla1h4e3077"]

[ext_resource type="Script" uid="uid://do1hvciqhqsg4" path="res://script/game.gd" id="1_5kiuu"]
[ext_resource type="Texture2D" uid="uid://c6vkd2no00f74" path="res://assets/ref rythm.png" id="2_xlg7c"]
[ext_resource type="Texture2D" uid="uid://bpge61se2bm55" path="res://assets/bar_under.png" id="3_xwcet"]
[ext_resource type="Script" uid="uid://nrib1gmwlxjn" path="res://script/camera_2d.gd" id="4_5g16k"]
[ext_resource type="Texture2D" uid="uid://umswaj71chxg" path="res://assets/bar_progress.png" id="4_p1ry8"]
[ext_resource type="Texture2D" uid="uid://c2hosfaxtvq1v" path="res://assets/bar_over.png" id="4_xlg7c"]
[ext_resource type="Texture2D" uid="uid://dio4vyuycbr34" path="res://assets/indicator_line.png" id="4_ym5sv"]
[ext_resource type="PackedScene" uid="uid://cxxi61oc4ljos" path="res://scene/player.tscn" id="5_5g16k"]
[ext_resource type="Texture2D" uid="uid://b145yfpti6aqh" path="res://assets/bg.png" id="5_81276"]
[ext_resource type="Texture2D" uid="uid://b4svug5fjixs" path="res://assets/key_listener.png" id="10_81276"]
[ext_resource type="PackedScene" uid="uid://bo7gritww8nho" path="res://scene/falling_key.tscn" id="12_sng2h"]

[sub_resource type="LabelSettings" id="LabelSettings_dbls1"]
font_color = Color(1, 0, 0, 1)

[sub_resource type="LabelSettings" id="LabelSettings_33cqm"]
font_color = Color(1, 0, 0, 1)

[sub_resource type="LabelSettings" id="LabelSettings_xwcet"]
font_color = Color(1, 0, 0, 1)

[node name="Game" type="Node2D"]
script = ExtResource("1_5kiuu")

[node name="PhaseTimer" type="Timer" parent="."]

[node name="SpawnTimer" type="Timer" parent="."]

[node name="StationTimer" type="Timer" parent="."]

[node name="ShakeContainer" type="Node2D" parent="."]

[node name="Camera2D" type="Camera2D" parent="ShakeContainer"]
position = Vector2(960, 540)
script = ExtResource("4_5g16k")

[node name="Bg" type="Sprite2D" parent="ShakeContainer"]
position = Vector2(960, 540)
texture = ExtResource("5_81276")

[node name="RefRythm" type="Sprite2D" parent="ShakeContainer"]
visible = false
position = Vector2(960, 540)
texture = ExtResource("2_xlg7c")

[node name="Player" parent="ShakeContainer" instance=ExtResource("5_5g16k")]

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="StaminaBar" type="TextureProgressBar" parent="CanvasLayer"]
offset_left = 659.0
offset_top = 58.0
offset_right = 1263.0
offset_bottom = 110.0
texture_under = ExtResource("3_xwcet")
texture_over = ExtResource("4_xlg7c")
texture_progress = ExtResource("4_p1ry8")

[node name="PhaseLabel" type="Label" parent="CanvasLayer"]
offset_left = 680.0
offset_top = 128.0
offset_right = 808.0
offset_bottom = 168.0
label_settings = SubResource("LabelSettings_dbls1")

[node name="StationLabel" type="Label" parent="CanvasLayer"]
offset_left = 1128.0
offset_top = 112.0
offset_right = 1256.0
offset_bottom = 152.0
label_settings = SubResource("LabelSettings_33cqm")

[node name="InhalerLabel" type="Label" parent="CanvasLayer"]
offset_left = 432.0
offset_top = 72.0
offset_right = 624.0
offset_bottom = 112.0
label_settings = SubResource("LabelSettings_xwcet")

[node name="ItemButton" type="TextureButton" parent="CanvasLayer"]
visible = false
offset_left = 102.0
offset_top = 844.0
offset_right = 282.0
offset_bottom = 1024.0

[node name="KeyListener" type="TextureButton" parent="."]
offset_left = 1632.0
offset_top = 839.0
offset_right = 1824.0
offset_bottom = 1031.0
texture_normal = ExtResource("10_81276")

[node name="IndicatorLine" type="Sprite2D" parent="."]
position = Vector2(1728, 450.99997)
scale = Vector2(0.9, 1.0014102)
texture = ExtResource("4_ym5sv")

[node name="FallingKey" parent="." instance=ExtResource("12_sng2h")]
position = Vector2(1728, 936)

[connection signal="timeout" from="PhaseTimer" to="." method="_on_phase_timer_timeout"]
[connection signal="timeout" from="SpawnTimer" to="." method="_on_spawn_timer_timeout"]
[connection signal="timeout" from="SpawnTimer" to="." method="_on_phase_timer_timeout"]
[connection signal="timeout" from="StationTimer" to="." method="_on_station_timer_timeout"]
